@using MediaCommMvc.Web.ViewModels.Forum
@using PagedList.Mvc
@model TopicDetailsViewModel

@{
    PagedListRenderOptions pagerRenderOptions = new PagedListRenderOptions
                                                    {
                                                        DisplayLinkToNextPage = PagedListDisplayMode.IfNeeded,
                                                        DisplayLinkToPreviousPage = PagedListDisplayMode.IfNeeded,
                                                        Display = PagedListDisplayMode.IfNeeded,
                                                        DisplayLinkToFirstPage = PagedListDisplayMode.IfNeeded,
                                                        DisplayLinkToLastPage = PagedListDisplayMode.IfNeeded,
                                                        LinkToFirstPageFormat = Resources.General.First,
                                                        LinkToPreviousPageFormat = Resources.General.Previous,
                                                        LinkToNextPageFormat = Resources.General.Next,
                                                        LinkToLastPageFormat = Resources.General.Last,
                                                        MaximumPageNumbersToDisplay = 10,
                                                        UlElementClasses = new List<string> { "pagination", "pagination-sm" },
                                                        DisplayEllipsesWhenNotShowingAllPageNumbers = true
                                                    };
}



<div class="clearfix">
    <div class="pull-left">
        <h3 id="topic-title">@Model.Title</h3>
    </div>
    <div class="pull-right">
        @Html.PagedListPager(this.Model.Posts, pageNumber => this.Url.Action(MVC.Forum.Topic().AddRouteValue("page", pageNumber)), pagerRenderOptions)
    </div>
</div>
<div class="panel panel-default">
    <table id="topic-posts" class="table table-striped table-bordered">
        <tbody>
            @foreach (PostViewModel post in Model.Posts)
            {
                <tr>
                    <td>
                        <div class="post">
                            <div class="post-header clearfix">
                                <div class="pull-left">
                                    <strong>  @post.AuthorName</strong>
                                </div>
                                <div class="pull-right">
                                    @post.Created
                                </div>
                            </div>
                            <div>
                                @Html.Raw(@post.Text)
                            </div>
                            <div class="post-actions clearfix">
                                @if (post.IsEditable)
                                {
                                    foreach (string approval in post.Approvals)
                                    {
                                        <div class='pull-left label label-info'>@approval</div>
                                    }
                                    
                                    <div class="pull-right">
                                        @Html.ActionLink(Resources.Forums.Edit, MVC.Forum.EditPost().AddRouteValue("id", post.Id), new { @class = "btn btn-xs btn-warning" })
                                    </div>
                                    <div class="pull-right">
                                        @using (Html.BeginForm(MVC.Forum.DeletePost().AddRouteValue("id", post.Id)))
                                        {
                                            <button type="submit" class="btn btn-xs btn-danger">@Resources.Forums.Delete</button>
                                        }
                                    </div>

                                    if (post.ShowApprovalButton)
                                    {
                                        <div class="pull-right">
                                            <a class="btn btn-primary btn-xs" data-url="test">@Resources.Approval.IApprove</a>
                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    </td>


                    @*<td class="post-author-column">
                            <div>

                            </div>
                            <div>

                            </div>
                        </td>
                        <td>



                            <div class="post-message">

                            </div>

                            <div class="post-action-button-container">
                                @Html.Partial(MVC.Forums.Views.ApprovalPane, new ApprovalPaneViewModel
                                    {
                                        Url = Url.GetPostUrl(post, this.Model.Posts.PageNumber),
                                        ShowButton = !post.Author.UserName.Equals(this.User.Identity.Name, StringComparison.OrdinalIgnoreCase)
                                    })
                            </div>
                        </td>*@

                </tr>
            }
        </tbody>
    </table>
</div>